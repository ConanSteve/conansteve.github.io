<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>陌上人如玉的时光机 | 陌上人如玉的时光机</title><meta name="author" content="陌上人如玉"><meta name="copyright" content="陌上人如玉"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="title: OpenWrt 的安装使用 date: 2023-04-16 11:15 author: 陌上人如玉 comments: description: keywords: top_img: cover: toc: toc_style_simple: mathjax: katex: aside: true aplayer: highlight_shrink: tags: 未分类 cate">
<meta property="og:type" content="article">
<meta property="og:title" content="陌上人如玉的时光机">
<meta property="og:url" content="http://conansteve.github.io/2023/10/13/Notebooks/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%BD%AF%E4%BB%B6/2023-04-16-OpenWrt/index.html">
<meta property="og:site_name" content="陌上人如玉的时光机">
<meta property="og:description" content="title: OpenWrt 的安装使用 date: 2023-04-16 11:15 author: 陌上人如玉 comments: description: keywords: top_img: cover: toc: toc_style_simple: mathjax: katex: aside: true aplayer: highlight_shrink: tags: 未分类 cate">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://conansteve.github.io/img/art/5.jpg">
<meta property="article:published_time" content="2023-10-13T03:17:38.000Z">
<meta property="article:modified_time" content="2023-10-13T03:17:38.000Z">
<meta property="article:author" content="陌上人如玉">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://conansteve.github.io/img/art/5.jpg"><link rel="shortcut icon" href="/img/avatar.png"><link rel="canonical" href="http://conansteve.github.io/2023/10/13/Notebooks/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%BD%AF%E4%BB%B6/2023-04-16-OpenWrt/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":400},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: 'days',
  dateSuffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '陌上人如玉的时光机',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-10-13 11:17:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="//at.alicdn.com/t/font_3298638_9mmiq161yi6.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1140697_dxory92pb0h.js"><link rel="stylesheet" href="/my.css"><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">118</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">25</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">23</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/gallery"><i class="fa-fw fas fa-image"></i><span> Gallery</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/art/5.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="陌上人如玉的时光机"><span class="site-name">陌上人如玉的时光机</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/gallery"><i class="fa-fw fas fa-image"></i><span> Gallery</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">No title</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-13T03:17:38.000Z" title="Created 2023-10-13 11:17:38">2023-10-13</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-10-13T03:17:38.000Z" title="Updated 2023-10-13 11:17:38">2023-10-13</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>19min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><hr>
<h2 id="title-OpenWrt-的安装使用-date-2023-04-16-11-15-author-陌上人如玉-comments-description-keywords-top-img-cover-toc-toc-style-simple-mathjax-katex-aside-true-aplayer-highlight-shrink-tags-未分类-categories-未分类">title: OpenWrt 的安装使用 date: 2023-04-16 11:15 author: 陌上人如玉 comments: description: keywords: top_img: cover: toc: toc_style_simple: mathjax: katex: aside: true aplayer: highlight_shrink: tags: <em>未分类</em> categories: <em>未分类</em></h2>
<h2 id="Introduction">Introduction</h2>
<p><a target="_blank" rel="noopener" href="https://openwrt.org/zh/downloads">openwrt.org 官网固件</a></p>
<p><strong>注意</strong></p>
<blockquote>
<p>Openwrt 界面很多数据修改了并不会生效，甚至造成系统文件错误，所以最好用命令行来执行。</p>
</blockquote>
<h2 id="固件下载">固件下载</h2>
<p><a target="_blank" rel="noopener" href="https://lidrive.vip/">x86 版</a></p>
<h2 id=""></h2>
<h2 id="常用命令">常用命令</h2>
<p><strong>注意</strong></p>
<blockquote>
<p>app 配置文件一般在<code>/etc/config/</code>文件夹下</p>
<p>系统服务和任务启动脚本在<code>/etc/init.d/</code>文件夹下</p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/maosm007/article/details/118767465%09">OpenWRT19.07_命令行_重拨 wan_重启路由</a> 查看 cpu 信息：<code>cat /proc/cpuinfo</code> 查看已安装包信息：<code>cat /usr/lib/opkg/status</code> 查看架构信息：<code>opkg print-architecture</code> ，在<code>/etc/opkg.conf</code>文件中 重启网络：<code>/etc/init.d/network restart</code> 重载网络配置：<code>/etc/init.d/network reload</code> 修改网络配置文件：<code>vim /etc/config/network</code> 修改无线网络配置文件：<code>vim /etc/config/wireless</code> 查看防火墙状态：<code>/etc/init.d/firewall status</code> 关闭防火墙：<code>/etc/init.d/firewall disable</code> <code>/etc/init.d/firewall stop</code> 开启防火墙：<code>/etc/init.d/firewall enable</code> 重启：<code>reboot</code> 关机： <code>poweroff</code></p>
<h2 id="安装教程">安装教程</h2>
<h3 id="ophub-版安装步骤">ophub 版安装步骤</h3>
<p>修改网络配置文件，将 IP 设置为<code>192.168.1.3</code>只要不是 1，就可以访问. 修改网络配置文件：<code>vim /etc/config/network</code> 重载网络配置：<code>/etc/init.d/network reload</code> 关闭软路由 dhcp 功能。 <strong>添加默认 dns：192.168.1.1，否则无法更新包。</strong></p>
<h4 id="默认配置文件">默认配置文件</h4>
<p><code>/etc/config/network</code></p>
<pre><code>config interface 'loopback'
	option device 'lo'
	option proto 'static'
	option ipaddr '127.0.0.1'
	option netmask '255.0.0.0'

config globals 'globals'
	option ula_prefix 'fdef:7a32:9e49::/48'

config device
	option name 'br-lan'
	option type 'bridge'
	list ports 'eth0'

config interface 'lan'
	option device 'br-lan'
	option proto 'static'
	option ipaddr '192.168.1.5'
	option netmask '255.255.255.0'
	option ip6assign '60'
	option gateway '192.168.1.1'
	list dns '192.168.1.1' # 可选dns
	list dns '114.114.114.114'

config interface 'docker'
	option device 'docker0'
	option proto 'none'
	option auto '0'

config device
	option type 'bridge'
	option name 'docker0'
</code></pre>
<p><code>/etc/config/wireless</code></p>
<pre><code>config wifi-device 'radio0'
	option type 'mac80211'
	option path 'platform/soc/ffe03000.sd/mmc_host/mmc0/mmc0:0001/mmc0:0001:1'
	option channel '36'
	option band '5g'
	option htmode 'VHT80'
	option disabled '1'

config wifi-iface 'default_radio0'
	option device 'radio0'
	option network 'lan'
	option mode 'ap'
	option ssid 'OpenWrt'
	option encryption 'none'
</code></pre>
<h4 id="安装-openclash">安装 openclash</h4>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010857736/article/details/123543325">解决 OpenWrt 下安装插件缺少依赖、架构不兼容、依赖冲突的问题</a> 官方源版本</p>
<pre><code>src/gz openwrt_core https://downloads.openwrt.org/snapshots/targets/armvirt/64/packages
src/gz openwrt_base https://downloads.openwrt.org/snapshots/packages/aarch64_cortex-a53/base
src/gz openwrt_luci https://downloads.openwrt.org/snapshots/packages/aarch64_cortex-a53/luci
src/gz openwrt_packages https://downloads.openwrt.org/snapshots/packages/aarch64_cortex-a53/packages
src/gz openwrt_routing https://downloads.openwrt.org/snapshots/packages/aarch64_cortex-a53/routing
src/gz openwrt_telephony https://downloads.openwrt.org/snapshots/packages/aarch64_cortex-a53/telephony
</code></pre>
<p><a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/openwrt/">将官方源换为清华源</a>： <code>sed -i 's_downloads.openwrt.org_mirrors.tuna.tsinghua.edu.cn/openwrt_' /etc/opkg/distfeeds.conf</code> 将清华源换为官方源： <code>sed -i 's_downloads.openwrt.org_downloads.openwrt.org_' /etc/opkg/distfeeds.conf</code> <a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/2232818">参考</a> <a target="_blank" rel="noopener" href="https://blog.csdn.net/xs18952904/article/details/124600025">参考</a> 一、 安装依赖</p>
<ol>
<li>卸载 <code>dnsmasq</code>，因为默认的不完整，需要安装<code>dnsmasq-full</code></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">opkg remove dnsmasq</span><br><span class="line">mv /etc/config/dhcp /etc/config/dhcp.bak</span><br></pre></td></tr></table></figure>
<ol>
<li>安装依赖（除了 luci-compat）</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install luci luci-base iptables dnsmasq-full coreutils coreutils-nohup bash curl jsonfilter ca-certificates ipset ip-full iptables-mod-tproxy kmod-tun luci-compat</span><br></pre></td></tr></table></figure>
<pre><code>⁃
</code></pre>
<h3 id="Flippy-版安装步骤">Flippy 版安装步骤</h3>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/bigcarp/article/details/129395326">HK1 box 安装 openwrt</a></p>
<p>修改网络配置文件，将 IP 设置为<code>192.168.1.3</code>只要不是 1，就可以访问</p>
<h4 id="桥接模式">桥接模式</h4>
<p><strong>注意：此模式下，界面操作可能配置文件并不生效，导致主（手动设置软路由）旁网络都无法上网，需要手动修改配置文件，使用命令</strong><code>/etc/init.d/network reload</code>重载网络，或者多试几次。</p>
<ul>
<li>连接 S905X3 旁路由 wifi，可以直接科学上网；连接主路由 DHCP 正常上网，手动设置 IP 和 DNS，可以科学上网。详细配置如下：</li>
</ul>
<blockquote>
<p>打开桥接模式，接口选择以太网适配器<code>eth0</code>和无线网络。 关闭旁路由 DHCP，打开 iPad 会间歇性断联 苹果系设备连接旁路由 WiFi 不稳定，或者直接连接不上旁路由 WiFi，但是可以通过连接主路由 WiFi，手动设置固定 IP 和 DNS(192.168.1.1)。</p>
</blockquote>
<p>可以使用的配置具体如下</p>
<pre><code>config interface 'loopback'
	option ifname 'lo'
	option proto 'static'
	option ipaddr '127.0.0.1'
	option netmask '255.0.0.0'

config globals 'globals'
	option ula_prefix 'fd80:a441:42c3::/48'

config interface 'lan'
	option ifname 'eth0'
	option proto 'static'
	option ipaddr '192.168.1.3'
	option netmask '255.255.255.0'
	option ip6assign '60'
	option delegate '0'
	option gateway '192.168.1.1'
	option broadcast '192.168.1.255'
	option dns '192.168.1.1'

config interface 'VPN'
	option ifname 'ipsec0'
	option proto 'static'
	option ipaddr '10.10.10.1'
	option netmask '255.255.255.0'

config interface 'vpn0'
	option ifname 'tun0'
	option proto 'none'

config interface 'docker'
	option ifname 'docker0'
	option proto 'none'
	option auto '0'

config device
	option type 'bridge'
	option name 'docker0'
</code></pre>
<p><img src="https://raw.githubusercontent.com/ConanSteve/images/master/blog/202304162141598.png" alt=""> <img src="https://raw.githubusercontent.com/ConanSteve/images/master/blog/202304162144860.png" alt=""> <img src="https://raw.githubusercontent.com/ConanSteve/images/master/blog/202304171925580.png" alt=""></p>
<h4 id="非桥接模式">非桥接模式</h4>
<p><strong>注意</strong></p>
<blockquote>
<ol>
<li>网络配置 DNS 需要添加 114，否则网速测试软件用不了。</li>
</ol>
</blockquote>
<p>可行配置文件如下：</p>
<pre><code>config interface 'loopback'
	option ifname 'lo'
	option proto 'static'
	option ipaddr '127.0.0.1'
	option netmask '255.0.0.0'

config globals 'globals'
	option ula_prefix 'fd1c:5910:ec02::/48'

config interface 'lan'
	option ifname 'eth0'
	option proto 'static'
	option ipaddr '192.168.1.8'
	option netmask '255.255.255.0'
	option ip6assign '60'
	option gateway '192.168.1.1'
	option broadcast '192.168.1.255'
	option dns '192.168.1.1 114.114.114.114'
	option delegate '0'

config interface 'VPN'
	option ifname 'ipsec0'
	option proto 'static'
	option ipaddr '10.10.10.1'
	option netmask '255.255.255.0'

config interface 'vpn0'
	option ifname 'tun0'
	option proto 'none'

config interface 'docker'
	option ifname 'docker0'
	option proto 'none'
	option auto '0'

config device
	option type 'bridge'
	option name 'docker0'
</code></pre>
<p><img src="https://raw.githubusercontent.com/ConanSteve/images/master/blog/202304181603673.png" alt=""> <img src="https://raw.githubusercontent.com/ConanSteve/images/master/blog/202304181601296.png" alt=""></p>
<h4 id="默认配置">默认配置</h4>
<p><code>/etc/config/network</code>默认配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">config</span> <span class="string">interface</span> <span class="string">&#x27;loopback&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ifname</span> <span class="string">&#x27;lo&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">proto</span> <span class="string">&#x27;static&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ipaddr</span> <span class="string">&#x27;127.0.0.1&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">netmask</span> <span class="string">&#x27;255.0.0.0&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">config</span> <span class="string">globals</span> <span class="string">&#x27;globals&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ula_prefix</span> <span class="string">&#x27;fd29:2fa8:af1f::/48&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">config</span> <span class="string">interface</span> <span class="string">&#x27;lan&#x27;</span></span><br><span class="line">   <span class="string">option</span> <span class="string">type</span> <span class="string">&#x27;bridge&#x27;</span> <span class="comment">#删除取消桥接</span></span><br><span class="line">	<span class="string">option</span> <span class="string">proto</span> <span class="string">&#x27;static&#x27;</span> <span class="comment">#协议类型</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ipaddr</span> <span class="string">&#x27;192.168.1.3&#x27;</span> <span class="comment">#ip地址</span></span><br><span class="line">	<span class="string">option</span> <span class="string">netmask</span> <span class="string">&#x27;255.255.255.0&#x27;</span> <span class="comment">#子网掩码</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ip6assign</span> <span class="string">&#x27;60&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">broadcast</span> <span class="string">&#x27;192.168.1.255&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">_orig_ifname</span> <span class="string">&#x27;eth0 wlan0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">_orig_bridge</span> <span class="string">&#x27;true&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">dns</span> <span class="string">&#x27;192.168.1.1&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">gateway</span> <span class="string">&#x27;192.168.1.1&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">delegate</span> <span class="string">&#x27;0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ifname</span> <span class="string">&#x27;eth0&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">config</span> <span class="string">interface</span> <span class="string">&#x27;VPN&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ifname</span> <span class="string">&#x27;ipsec0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">proto</span> <span class="string">&#x27;static&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ipaddr</span> <span class="string">&#x27;10.10.10.1&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">netmask</span> <span class="string">&#x27;255.255.255.0&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">config</span> <span class="string">interface</span> <span class="string">&#x27;vpn0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ifname</span> <span class="string">&#x27;tun0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">proto</span> <span class="string">&#x27;none&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">config</span> <span class="string">interface</span> <span class="string">&#x27;docker&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ifname</span> <span class="string">&#x27;docker0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">proto</span> <span class="string">&#x27;none&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">auto</span> <span class="string">&#x27;0&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">config</span> <span class="string">device</span></span><br><span class="line">	<span class="string">option</span> <span class="string">type</span> <span class="string">&#x27;bridge&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">name</span> <span class="string">&#x27;docker0&#x27;</span></span><br></pre></td></tr></table></figure>
<p><code>/etc/config/wireless</code>默认配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">config</span> <span class="string">wifi-device</span> <span class="string">&#x27;radio0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">type</span> <span class="string">&#x27;mac80211&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">hwmode</span> <span class="string">&#x27;11a&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">path</span> <span class="string">&#x27;platform/soc/ffe03000.sd/mmc_host/mmc0/mmc0:0001/mmc0:0001:1&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">country</span> <span class="string">&#x27;CN&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">legacy_rates</span> <span class="string">&#x27;1&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">mu_beamformer</span> <span class="string">&#x27;0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">band</span> <span class="string">&#x27;5g&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">channel</span> <span class="string">&#x27;36&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">htmode</span> <span class="string">&#x27;VHT80&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">config</span> <span class="string">wifi-iface</span> <span class="string">&#x27;default_radio0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">device</span> <span class="string">&#x27;radio0&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">mode</span> <span class="string">&#x27;ap&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">ssid</span> <span class="string">&#x27;S905X3&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">encryption</span> <span class="string">&#x27;psk2&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">key</span> <span class="string">&#x27;123654789&#x27;</span> <span class="comment">#密码</span></span><br><span class="line">	<span class="string">option</span> <span class="string">network</span> <span class="string">&#x27;lan&#x27;</span></span><br><span class="line">	<span class="string">option</span> <span class="string">disabled</span> <span class="string">&#x27;1&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="armbian-安装-Openwrt">armbian 安装 Openwrt</h3>
<p><strong>千万不能多开 openwrt，否则开机启动不了网络，只能重装系统</strong></p>
<blockquote>
<p>如果多开不要使用同一个虚拟网卡，可能没问题，暂时未测试。 <a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a44d06dfd37e">armbian 安装 openwrt</a> <a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/112484256">OpenWrt 中，旁路由的设置与使用</a> 可以参考 docker 镜像<code>piaoyizy/openwrt-aarch64</code>的使用说明 <strong>主路由设置不需要更改 DHCP</strong></p>
</blockquote>
<p><code>docker</code>命令行导入镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gunzip -c /opt/openwrt/openwrt.tar.gz | docker load</span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line">docker load &lt; xxx.tar</span><br><span class="line">docker images</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>docker</code>命令行保存镜像</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">直接将容器保存为本地镜像</span></span><br><span class="line">docker ps -a</span><br><span class="line">docker export -o /opt/openwrt/openwrt-arm64-perfect:1.1.tar 2476e6578d9c</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">或者</span></span><br><span class="line">docker export 2476e6578d9c &gt; /opt/openwrt/tmp.tar  openwrt-arm64-perfect:1.1</span><br><span class="line">tar -czvf /opt/openwrt/openwrt-arm64-perfect:1.1.tar.gz /opt/openwrt/tmp.tar</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">将docker 镜像导出为本地文件</span></span><br><span class="line">docker images  # 查看镜像ID</span><br><span class="line">docker save 2f7abc88e74c &gt; save.tar</span><br><span class="line">docker save  | gzip &gt; /opt/openwrt/openwrt-arm64-perfect_1.1.tar.gz</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">开启网络混合模式</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">需要将命令写入`/etc/rc.local`,否则重启会失效，可能导致系统无法开机，只能重装</span></span><br><span class="line">ip link set eth0 promisc on</span><br><span class="line">ip link set wlan0 promisc on</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建docker虚拟网卡，名称为macnet</span></span><br><span class="line">docker network create -d macvlan --subnet=192.168.1.0/24 --gateway=192.168.1.1 -o parent=eth0 macnet</span><br><span class="line"></span><br><span class="line">docker network create -d macvlan --subnet=192.168.1.0/24 --gateway=192.168.1.1 -o parent=wlan0 macnet</span><br><span class="line">docker network rm macnet</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">查看docker虚拟网卡</span></span><br><span class="line">docker network ls</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">导入或者拉取镜像</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">本镜像有问题，停止，导致系统重启和崩溃</span></span><br><span class="line">docker run --restart on-failure -d --network macnet --privileged unifreq/openwrt-aarch64:latest /sbin/init</span><br><span class="line">docker run --restart on-failure -d --network macnet --privileged hibuddies/openwrt-aarch64-21.02 /sbin/init</span><br><span class="line"></span><br><span class="line">docker run --restart on-failure -d --network macnet --privileged sulinggg/openwrt:armv8 /sbin/init</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">来源镜像</span></span><br><span class="line">docker run --restart=on-failure -d --network macnet --privileged unifreq/openwrt-aarch64:latest /sbin/init</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">已经配置好的镜像</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">宝塔面板直接创建容器，可以使用</span></span><br><span class="line">docker run --restart on-failure -d --network macnet --privileged openwrt-arm64-perfect:1.0 /sbin/init</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">进行openwrt容器终端</span></span><br><span class="line">docker ps</span><br><span class="line">docker exec -it 56c7ae62abea /bin/bash</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vi /etc/config/network</span><br></pre></td></tr></table></figure>
<p>默认密码<code>password</code></p>
<p>防火墙-自定义规则<code>iptables -t nat -I POSTROUTING -j MASQUERADE</code></p>
<p><a target="_blank" rel="noopener" href="https://opclash.com/luyou/80.html">openwrt 安装 openclash</a> <strong>注意</strong></p>
<blockquote>
<p>openwrt 无法访问 youtube 可能是因为浏览器设置了安全 DNS，可以试试手机是否可以访问 dns 设置</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">192.168.1.3</span><br><span class="line">114.114.114.114</span><br></pre></td></tr></table></figure>
<h3 id="MacOS-安装">MacOS 安装</h3>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/w946612410/article/details/113997146">VMware 安装 OpenWrt 让宿主机上网&amp;旁路由（两种方案）</a></p>
<h2 id="重新安装-Version666">重新安装 Version666</h2>
<ol>
<li>
<p>备份系统配置、iStore 配置、zshrc 文件，打开威力同步所有项目。</p>
</li>
<li>
<p>将系统从 sd 卡安装到 emmc</p>
</li>
<li>
<p>修改<code>/etc/config/network</code>，然后<code>/etc/init.d/network reload</code>（修改了 TF 卡，就省略这一步）</p>
</li>
<li>
<p>更换壁纸</p>
</li>
<li>
<p>从 iStore 恢复备份。如果恢复失败，手动安装以下插件</p>
</li>
</ol>
<blockquote>
<ul>
<li>
<p>关机</p>
</li>
<li>
<p>AList</p>
</li>
<li>
<p>易有云</p>
</li>
<li>
<p>网心云</p>
</li>
<li>
<p>SFTP</p>
</li>
</ul>
</blockquote>
<ol>
<li>
<p>从网页访问 Openwrt，上传备份好的配置,等待重启。</p>
</li>
<li>
<p>关闭 Docker，修改 Docker 根目录配置文件<code>/etc/docker/daemon.json</code>路径<code>/mnt/sda1/DockerConfig/docker/</code>，重启 docker</p>
</li>
<li>
<p>手动上传<code>openclash</code>内核，执行</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/usr/share/openclash/core/</span><br><span class="line"></span><br><span class="line">cp /mnt/sda1/Documents/FanCloud/003-Softs/107-Openwrt/101-OpenWrtPackage/openclash/KernelRelease/core/clash /etc/openclash/core/</span><br><span class="line">cp /mnt/sda1/Documents/FanCloud/003-Softs/107-Openwrt/101-OpenWrtPackage/openclash/KernelRelease/core/clash_tun /etc/openclash/core/</span><br><span class="line">cp /mnt/sda1/Documents/FanCloud/003-Softs/107-Openwrt/101-OpenWrtPackage/openclash/KernelRelease/core/clash_meta /etc/openclash/core/</span><br></pre></td></tr></table></figure>
<ol>
<li>执行</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg install zsh</span><br><span class="line">opkg install python3-pip</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">失败的话就执行</span></span><br><span class="line">opkg install /mnt/sda1/Documents/FanCloud/003-Softs/107-Openwrt/101-OpenWrtPackage/zsh/zsh_5.9-1_aarch64_cortex-a53.ipk</span><br></pre></td></tr></table></figure>
<ol>
<li>更换 python 源</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">/root/.config/pip/pip.conf</span></span><br><span class="line">pip3 config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">或者</span></span><br><span class="line">pip3 config set global.index-url https://mirrors.aliyun.com/pypi/simple/</span><br></pre></td></tr></table></figure>
<ol>
<li>
<p>直接拷贝 zsh 和 oh-my-zsh 配置文件，可以省略后三步</p>
</li>
<li>
<p>执行命令，安装 Oh-my-zsh</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/felix-fly/openwrt-ohmyzsh/master/install.sh)&quot;</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">失败的话就执行</span></span><br><span class="line">sh /mnt/sda1/Documents/FanCloud/003-Softs/107-Openwrt/101-OpenWrtPackage/oh-my-zsh/install.sh</span><br></pre></td></tr></table></figure>
<ol>
<li>拷贝 autojump、zsh-syntax-highlighting、zsh-autosuggestions 插件到 openwrt，执行</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.oh-my-zsh/custom/plugins/autojump</span><br><span class="line">python3 ./install.py</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol>
<li>替换<code>~/.zshrc</code>文件</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改</span></span><br><span class="line">export ZSH=&quot;/root/.oh-my-zsh&quot;</span><br><span class="line">ZSH_THEME=&quot;rkj-repos&quot;</span><br><span class="line">plugins=(zsh-syntax-highlighting zsh-autosuggestions)</span><br><span class="line">source $ZSH/oh-my-zsh.sh</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">添加</span></span><br><span class="line">[[ -s /root/.autojump/etc/profile.d/autojump.sh ]] &amp;&amp; source /root/.autojump/etc/profile.d/autojump.sh</span><br><span class="line">alias ss=&quot;sensors&quot;</span><br><span class="line">alias src=&quot;source ~/.zshrc&quot;</span><br><span class="line">alias als=&quot;alias&quot;</span><br><span class="line">alias alsg=&quot;alias |grep&quot;</span><br><span class="line">alias l=&#x27;ls -CF&#x27;</span><br><span class="line">alias la=&#x27;ls -AF&#x27;</span><br><span class="line">alias lsa=&#x27;ls -AF&#x27;</span><br><span class="line">alias ll=&#x27;ls -lhF&#x27;</span><br><span class="line">alias lla=&#x27;ls -lhAF&#x27;</span><br><span class="line">alias lsp=&#x27;ls -plh&#x27;</span><br><span class="line">alias lt=&#x27;ls -lhtF&#x27;</span><br><span class="line">alias lat=&#x27;ls -lhatF&#x27;</span><br></pre></td></tr></table></figure>
<ol>
<li>若使用 docker，此步骤跳过。修改/etc/rc.local 文件，添加</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh /mnt/sda1/Config/opt/yt-dlp-web-ui/start.sh</span><br></pre></td></tr></table></figure>
<h2 id="系统优化">系统优化</h2>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/20881a8b6e02">自定义启动项</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/sh /etc/rc.common</span></span><br><span class="line">START=99</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start()&#123;</span><br><span class="line">        /mnt/sda1/myapp</span><br><span class="line">&#125;</span><br><span class="line">stop()&#123;</span><br><span class="line">        /mnt/sda1/myapp -s</span><br><span class="line">&#125;</span><br><span class="line">restart()&#123;</span><br><span class="line">       /mnt/sda1/myapp</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="-2"></h3>
<h2 id="插件配置">插件配置</h2>
<h3 id="argone-主体">argone 主体</h3>
<p>默认暗色主色调：#483d8b</p>
<p>自定义暗色主色调：#268BFE、#1E6FFF</p>
<h3 id="SmartDNS">SmartDNS</h3>
<table>
<thead>
<tr>
<th style="text-align:left">名称</th>
<th>DNS 地址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">谷歌</td>
<td>8.8.8.8</td>
</tr>
<tr>
<td style="text-align:left">百度</td>
<td>180.76.76.76</td>
</tr>
<tr>
<td style="text-align:left">阿里</td>
<td>223.5.5.5</td>
</tr>
<tr>
<td style="text-align:left">腾讯</td>
<td>119.29.29.29</td>
</tr>
<tr>
<td style="text-align:left">微软</td>
<td>4.2.2.2</td>
</tr>
<tr>
<td style="text-align:left">微软</td>
<td>4.2.2.1</td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
</tr>
<tr>
<td style="text-align:left"></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="adgardhome">adgardhome</h3>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/8167d0f82832">广告测试页面</a></p>
<h3 id="aria2">aria2</h3>
<p><a target="_blank" rel="noopener" href="https://www.right.com.cn/forum/thread-3770017-1-1.html">aria2 配置</a> <a target="_blank" rel="noopener" href="https://blog.csdn.net/zhu378287521/article/details/78363420">无法打开 aria</a> 默认配置文件<code>/etc/config/aria2</code></p>
<blockquote>
<p>注意，需要保证配置的文件夹都存在。否则启动不了</p>
</blockquote>
<p>手动配置 <code>aria2c -c –conf-path=/mnt/sda1/Config/etc/aria2/aria2.conf -D</code> 查看程序是否启动<code>ps |grep aria</code></p>
<pre><code>### docker

docker运行ubuntu
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">    docker run -d --restart=always \</span><br><span class="line">                    -v /mnt/sda1/docker-data/ubuntu20.04:/opt \</span><br><span class="line">                    -p 6601:6601 \</span><br><span class="line">                    --name=&quot;ubunut20.04&quot; ubuntu:20.04</span><br><span class="line"></span><br><span class="line">[修改 docker 根目录](https://www.v2ex.com/t/783236)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">&gt; </span><span class="language-bash">1.  先 `/etc/init.d/dockerd stop` 停止 docker 服务</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">&gt; 2.  再拷贝文件，通过 `rsync -av source-path destination-path`或者`<span class="built_in">cp</span> -r`命令。</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">&gt; 3.  然后再更改 `/etc/docker/daemon.json` 中的 `data-root` 字段，改成新的路径。ps: 如果这个 json 文件中没有这个字段，创建即可。如果不成功，就在`/etc/config/dockd`文件中。最好两者都修改一下。</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">&gt; 4.  看情况把 docker 容器持久化了的配置文件 volumes 的映射的路径也转移一下</span></span><br><span class="line"><span class="meta prompt_">&gt;</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash">&gt; 5.  重新启动 docker daemon （ dockerd ) `/etc/init.d/dockerd start`</span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment">## Ubuntu</span></span></span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">docker run --restart=unless-stopped -d     --dns=172.17.0.1     -u=0:0     --shm-size=512m     -p 6901:6901     -e VNC_PW=1212     -e VNC_USE_HTTP=0  -e TZ=Asia/Shanghai -v /mnt:/mnt --name ubuntu linkease/desktop-ubuntu-full-arm64:latest</span><br><span class="line"></span><br><span class="line">docker run -d --restart=always --dns=192.168.1.1 -u=0:0 --shm-size=512m -p 6901:6901 -e VNC_PW=1212 -e VNC_USE_HTTP=0 -e TZ=Asia/Shanghai -v /mnt:/mnt --name ubuntu linkease/desktop-ubuntu-full-arm64:latest</span><br><span class="line"></span><br><span class="line">docker run -d --restart=always --network=host -e VNC_PW=1212 -e VNC_USE_HTTP=0 -e TZ=Asia/Shanghai -v /mnt:/mnt --name ubuntu linkease/desktop-ubuntu-full-arm64:latest</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除容器</span></span><br><span class="line">docker rm ubuntu</span><br></pre></td></tr></table></figure>
</code></pre>
<h3 id="Armbian">Armbian</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull armbian/build:latest</span><br><span class="line">docker run -d --restart=always --network=host -v /mnt:/mnt --name armbian armbian/build:latest</span><br></pre></td></tr></table></figure>
<h2 id="常用功能">常用功能</h2>
<h5 id="查看-smart6">查看 smart6</h5>
<p><a target="_blank" rel="noopener" href="https://blog.eqianzheng.com/archives/129.html">查看硬盘 smart 信息</a></p>
<p>openwrt 需要安装这两个插件</p>
<ul>
<li>
<p>smartmontools</p>
</li>
<li>
<p>smartmontools-drivedb</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg install smartmontools</span><br><span class="line">opkg install smartmontools-drivedb</span><br><span class="line"></span><br><span class="line">smartctl --all /dev/sda1</span><br><span class="line">smartctl -A /dev/sda1</span><br></pre></td></tr></table></figure>
<h5 id="自定义目录插件">自定义目录插件</h5>
<p>这些插件为了以后数据迁移方便，修改了默认配置目录或运行目录，迁移数据钱，需要先停止这些插件。 <code>xxx</code>为挂载磁盘的文件夹名称。</p>
<ul>
<li>
<p>alist /mnt/xxx/opt/alist</p>
</li>
<li>
<p>可道云 /mnt/xxx/opt/kodexplorer</p>
</li>
<li>
<p>微力同步 /mnt/xxx/etc/verysync</p>
</li>
<li>
<p>filebrowser /mnt/xxx/opt/filebrowser</p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://book-dl.com/cms/openwrt/QeKo9zLoDNB34gNl.html">升级所有 opkg 可更新包</a></p>
<pre><code>opkg update
opkg list-upgradable | awk -F ' - ' '&#123;print $1&#125;' | xargs opkg upgrade

# 强置升级
opkg update
opkg list-upgradable | cut -f 1 -d ' ' | xargs opkg upgrade --force-depends
</code></pre>
<p>升级 python 依赖包</p>
<pre><code>opkg list-upgradable | grep python3
opkg install xxx

opkg list-upgradable | grep python3- | cut -f 1 -d ' ' | xargs opkg upgrade

opkg list-upgradable | grep luci- | cut -f 1 -d ' ' | xargs opkg upgrade

opkg list-upgradable | grep ssl | cut -f 1 -d ' ' | xargs opkg upgrade
</code></pre>
<h2 id="源">源</h2>
<h4 id="HK1Rbox">HK1Rbox</h4>
<p>修改<code>/etc/opkg.conf</code>文件，注释签名检查。 源配置文件目录<code>/etc/opkg/</code></p>
<h5 id="清华源">清华源</h5>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src/gz openwrt_core https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/22.03.5/targets/armvirt/64/packages</span><br><span class="line">src/gz openwrt_base https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/base</span><br><span class="line">src/gz openwrt_luci https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/luci</span><br><span class="line">src/gz openwrt_packages https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/packages</span><br><span class="line">src/gz openwrt_routing https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/routing</span><br><span class="line">src/gz openwrt_telephony https://mirrors.tuna.tsinghua.edu.cn/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/telephony</span><br></pre></td></tr></table></figure>
<h5 id="腾讯源">腾讯源</h5>
<h6 id="openwrt-22-03-5">openwrt 22.03.5</h6>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src/gz openwrt_core https://mirrors.cloud.tencent.com/openwrt/releases/22.03.5/targets/armvirt/64/packages</span><br><span class="line">src/gz openwrt_base https://mirrors.cloud.tencent.com/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/base</span><br><span class="line">src/gz openwrt_luci https://mirrors.cloud.tencent.com/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/luci</span><br><span class="line">src/gz openwrt_packages https://mirrors.cloud.tencent.com/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/packages</span><br><span class="line">src/gz openwrt_routing https://mirrors.cloud.tencent.com/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/routing</span><br><span class="line">src/gz openwrt_telephony https://mirrors.cloud.tencent.com/openwrt/releases/22.03.5/packages/aarch64_cortex-a53/telephony</span><br></pre></td></tr></table></figure>
<h6 id="lede-snapshots">lede snapshots</h6>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">src/gz openwrt_core https://mirrors.cloud.tencent.com/lede/snapshots/targets/armsr/armv8/packages</span><br><span class="line">src/gz openwrt_base https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/base</span><br><span class="line">src/gz openwrt_luci https://mirrors.cloud.tencent.com/lede/releases/18.06.9/packages/aarch64_cortex-a53/luci</span><br><span class="line">src/gz openwrt_packages https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/packages</span><br><span class="line">src/gz openwrt_routing https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/routing</span><br><span class="line">src/gz openwrt_telephony https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/telephony</span><br></pre></td></tr></table></figure>
<h6 id="lede-22-03-5">lede 22.03.5</h6>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src/gz openwrt_core https://mirrors.cloud.tencent.com/lede/releases/22.03.5/targets/armvirt/64/packages</span><br><span class="line">src/gz openwrt_base https://mirrors.cloud.tencent.com/lede/releases/22.03.5/packages/aarch64_cortex-a53/base</span><br><span class="line">src/gz openwrt_luci https://mirrors.cloud.tencent.com/lede/releases/22.03.5/packages/aarch64_cortex-a53/luci</span><br><span class="line">src/gz openwrt_packages https://mirrors.cloud.tencent.com/lede/releases/22.03.5/packages/aarch64_cortex-a53/packages</span><br><span class="line">src/gz openwrt_routing https://mirrors.cloud.tencent.com/lede/releases/22.03.5/packages/aarch64_cortex-a53/routing</span><br><span class="line">src/gz openwrt_telephony https://mirrors.cloud.tencent.com/lede/releases/22.03.5/packages/aarch64_cortex-a53/telephony</span><br></pre></td></tr></table></figure>
<h6 id="lede-snapshots-默认">lede snapshots 默认</h6>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">src/gz openwrt_OpenAppFilter https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/OpenAppFilter</span><br><span class="line">src/gz openwrt_kenzo https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/kenzo</span><br><span class="line">src/gz openwrt_passwall https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/passwall</span><br><span class="line">src/gz openwrt_core https://mirrors.cloud.tencent.com/lede/snapshots/targets/armvirt/64/packages</span><br><span class="line"></span><br><span class="line">src/gz openwrt_base https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/base</span><br><span class="line">src/gz openwrt_luci https://mirrors.cloud.tencent.com/lede/releases/18.06.9/packages/aarch64_cortex-a53/luci</span><br><span class="line">src/gz openwrt_packages https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/packages</span><br><span class="line">src/gz openwrt_routing https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/routing</span><br><span class="line">src/gz openwrt_telephony https://mirrors.cloud.tencent.com/lede/snapshots/packages/aarch64_cortex-a53/telephony</span><br></pre></td></tr></table></figure>
<h2 id="问题解答">问题解答</h2>
<h6 id="打不开-ttyd">打不开 ttyd</h6>
<p>是因为修改了的网段与编译的初始网段不一致导致，目前问题无解。</p>
<h2 id="Reference">Reference</h2>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="http://conansteve.github.io">陌上人如玉</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://conansteve.github.io/2023/10/13/Notebooks/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%BD%AF%E4%BB%B6/2023-04-16-OpenWrt/">http://conansteve.github.io/2023/10/13/Notebooks/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E8%BD%AF%E4%BB%B6/2023-04-16-OpenWrt/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/art/5.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> Donate</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2023/10/12/Notebooks/%E6%99%AE%E4%BC%97/readme/" title=""><img class="cover" src="/img/matery/7.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info"></div></div></a></div></nav><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#title-OpenWrt-%E7%9A%84%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8-date-2023-04-16-11-15-author-%E9%99%8C%E4%B8%8A%E4%BA%BA%E5%A6%82%E7%8E%89-comments-description-keywords-top-img-cover-toc-toc-style-simple-mathjax-katex-aside-true-aplayer-highlight-shrink-tags-%E6%9C%AA%E5%88%86%E7%B1%BB-categories-%E6%9C%AA%E5%88%86%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">title: OpenWrt 的安装使用 date: 2023-04-16 11:15 author: 陌上人如玉 comments: description: keywords: top_img: cover: toc: toc_style_simple: mathjax: katex: aside: true aplayer: highlight_shrink: tags: 未分类 categories: 未分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Introduction"><span class="toc-number">2.</span> <span class="toc-text">Introduction</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BA%E4%BB%B6%E4%B8%8B%E8%BD%BD"><span class="toc-number">3.</span> <span class="toc-text">固件下载</span></a></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">4.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">5.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B"><span class="toc-number">6.</span> <span class="toc-text">安装教程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ophub-%E7%89%88%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4"><span class="toc-number">6.1.</span> <span class="toc-text">ophub 版安装步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">6.1.1.</span> <span class="toc-text">默认配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-openclash"><span class="toc-number">6.1.2.</span> <span class="toc-text">安装 openclash</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flippy-%E7%89%88%E5%AE%89%E8%A3%85%E6%AD%A5%E9%AA%A4"><span class="toc-number">6.2.</span> <span class="toc-text">Flippy 版安装步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.2.1.</span> <span class="toc-text">桥接模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9D%9E%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.2.2.</span> <span class="toc-text">非桥接模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE"><span class="toc-number">6.2.3.</span> <span class="toc-text">默认配置</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#armbian-%E5%AE%89%E8%A3%85-Openwrt"><span class="toc-number">6.3.</span> <span class="toc-text">armbian 安装 Openwrt</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MacOS-%E5%AE%89%E8%A3%85"><span class="toc-number">6.4.</span> <span class="toc-text">MacOS 安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E6%96%B0%E5%AE%89%E8%A3%85-Version666"><span class="toc-number">7.</span> <span class="toc-text">重新安装 Version666</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E4%BC%98%E5%8C%96"><span class="toc-number">8.</span> <span class="toc-text">系统优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#-2"><span class="toc-number">8.1.</span> <span class="toc-text"></span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%92%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">9.</span> <span class="toc-text">插件配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#argone-%E4%B8%BB%E4%BD%93"><span class="toc-number">9.1.</span> <span class="toc-text">argone 主体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SmartDNS"><span class="toc-number">9.2.</span> <span class="toc-text">SmartDNS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#adgardhome"><span class="toc-number">9.3.</span> <span class="toc-text">adgardhome</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#aria2"><span class="toc-number">9.4.</span> <span class="toc-text">aria2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Armbian"><span class="toc-number">9.5.</span> <span class="toc-text">Armbian</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD"><span class="toc-number">10.</span> <span class="toc-text">常用功能</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B-smart6"><span class="toc-number">10.0.0.1.</span> <span class="toc-text">查看 smart6</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%AE%E5%BD%95%E6%8F%92%E4%BB%B6"><span class="toc-number">10.0.0.2.</span> <span class="toc-text">自定义目录插件</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%BA%90"><span class="toc-number">11.</span> <span class="toc-text">源</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HK1Rbox"><span class="toc-number">11.0.1.</span> <span class="toc-text">HK1Rbox</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B8%85%E5%8D%8E%E6%BA%90"><span class="toc-number">11.0.1.1.</span> <span class="toc-text">清华源</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%85%BE%E8%AE%AF%E6%BA%90"><span class="toc-number">11.0.1.2.</span> <span class="toc-text">腾讯源</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#openwrt-22-03-5"><span class="toc-number">11.0.1.2.1.</span> <span class="toc-text">openwrt 22.03.5</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#lede-snapshots"><span class="toc-number">11.0.1.2.2.</span> <span class="toc-text">lede snapshots</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#lede-22-03-5"><span class="toc-number">11.0.1.2.3.</span> <span class="toc-text">lede 22.03.5</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#lede-snapshots-%E9%BB%98%E8%AE%A4"><span class="toc-number">11.0.1.2.4.</span> <span class="toc-text">lede snapshots 默认</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%A7%A3%E7%AD%94"><span class="toc-number">12.</span> <span class="toc-text">问题解答</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%93%E4%B8%8D%E5%BC%80-ttyd"><span class="toc-number">12.0.0.0.1.</span> <span class="toc-text">打不开 ttyd</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-number">13.</span> <span class="toc-text">Reference</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-image: url('/img/art/5.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 陌上人如玉</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi! Welcome to ConanSteve's time machine!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '36de2d0c9d5f5de8c986',
      clientSecret: 'b1be6c2e8a1b6c8266ebbc68e238c4e7b19ab8a7',
      repo: 'gitalk',
      owner: 'ConanSteve',
      admin: ['ConanSteve'],
      id: '441d53871c74bf3e70013e37a2aed1a4',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.textContent= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><div class="aplayer no-destroy" data-id="002SPn6X1xHLfO" data-server="tencent" data-type="song" data-fixed="true" data-autoplay="false" lrc-type="0"> </div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>